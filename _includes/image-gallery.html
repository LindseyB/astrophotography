<div class="gallery-header">
    {% assign image_count = 0 %}
    {% assign image_files = "" | split: "," %}
    {% for file in site.static_files %}
        {% if file.path contains include.folder %}
            {% if file.extname == '.png' or file.extname == '.PNG' or file.extname == '.jpg' or file.extname == '.jpeg' or file.extname == '.JPG' or file.extname == '.JPEG' %}
                {% assign image_files = image_files | push: file %}
            {% endif %}
        {% endif %}
    {% endfor %}
    {% assign sorted_images = image_files | sort: 'path' %}

    <div class="gallery-stats">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M21,17H7V3A1,1 0 0,0 6,2H4A1,1 0 0,0 3,3V17A4,4 0 0,0 7,21H21A1,1 0 0,0 22,20V18A1,1 0 0,0 21,17M5,17V4H6V17A2,2 0 0,1 5,17M21,19H7A2,2 0 0,1 7,17H21V19Z"/>
        </svg>
        {{ sorted_images | size }} photos
    </div>
</div>

<ul class="art-gallery">
    {% for file in sorted_images %}
        {% assign filenameparts = file.path | split: "/" %}
        {% assign filename = filenameparts | last | replace: file.extname,"" %}

        {% assign parts = filename | split: "-" %}

        {% if parts.size == 1 %}
            {% assign digits_removed = filename %}
            {% for i in (0..9) %}
                {% assign digit_str = i | append: "" %}
                {% assign digits_removed = digits_removed | replace: digit_str, "" %}
            {% endfor %}

            {% assign sequence_match = filename | remove: digits_removed %}
            {% if sequence_match != "" %}
                {% assign title = digits_removed %}
                {% assign number = sequence_match %}
            {% else %}
                {% assign title = filename %}
                {% assign number = "01" %}
            {% endif %}
        {% else %}
            {% assign catalog_id = parts[0] %}
            {% assign object_name_parts = parts | slice: 1, parts.size %}
            {% assign object_name = object_name_parts | join: " " | replace: "_", " " %}
            {% assign title = catalog_id | append: " - " | append: object_name %}
            {% assign number = catalog_id %}
        {% endif %}

        <li class="art-gallery-item">
            <a href="{{ file.path | relative_url }}" title="{{ title | default: filename }}" target="_blank" class="art-gallery-link">
                <div class="art-gallery-image-container">
                    <img src="//images.weserv.nl/?url={{ site.url | replace: 'http://','' | replace: 'https://','' }}{{ file.path | relative_url }}&w=500&h=500&output=jpg"
                         alt="{{ title | default: filename }}"
                         class="art-gallery-image"
                         loading="lazy" />
                </div>
                <div class="art-gallery-overlay">
                    <h3 class="art-gallery-title">{{ title | default: "Untitled" }}</h3>
                    <div class="art-gallery-number">#{{ number }}</div>
                </div>
            </a>
        </li>
    {% endfor %}
</ul>
